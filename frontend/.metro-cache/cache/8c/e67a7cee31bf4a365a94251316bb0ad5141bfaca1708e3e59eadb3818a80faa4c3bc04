{"dependencies":[{"name":"./env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":50,"index":50}}],"key":"dhYnhmtx0Ij5vR3SSIalcSex/FI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getBase64ForPlace = getBase64ForPlace;\n  var _env = require(_dependencyMap[0], \"./env\");\n  async function fetchPexels(query) {\n    try {\n      const res = await fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}&per_page=1`, {\n        headers: {\n          Authorization: _env.PEXELS_KEY\n        }\n      });\n      if (!res.ok) return null;\n      const json = await res.json();\n      const url = json?.photos?.[0]?.src?.large || json?.photos?.[0]?.src?.original;\n      if (!url) return null;\n      const img = await fetch(url);\n      const blob = await img.blob();\n      const base64 = await blobToBase64(blob);\n      return base64;\n    } catch {\n      return null;\n    }\n  }\n  async function fetchUnsplash(query) {\n    const clientId = _env.UNSPLASH_KEYS[0];\n    try {\n      const res = await fetch(`https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=1&client_id=${clientId}`);\n      if (!res.ok) return null;\n      const json = await res.json();\n      const url = json?.results?.[0]?.urls?.regular || json?.results?.[0]?.urls?.full;\n      if (!url) return null;\n      const img = await fetch(url);\n      const blob = await img.blob();\n      const base64 = await blobToBase64(blob);\n      return base64;\n    } catch {\n      return null;\n    }\n  }\n  function blobToBase64(blob) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const base64 = reader.result.split(',')[1];\n        resolve(base64);\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  }\n  async function getBase64ForPlace(query) {\n    // Try Pexels first, fallback to Unsplash\n    let img = await fetchPexels(query);\n    if (img) return img;\n    img = await fetchUnsplash(query);\n    return img;\n  }\n});","lineCount":62,"map":[[7,2,50,0,"exports"],[7,9,50,0],[7,10,50,0,"getBase64ForPlace"],[7,27,50,0],[7,30,50,0,"getBase64ForPlace"],[7,47,50,0],[8,2,1,0],[8,6,1,0,"_env"],[8,10,1,0],[8,13,1,0,"require"],[8,20,1,0],[8,21,1,0,"_dependencyMap"],[8,35,1,0],[9,2,3,0],[9,17,3,15,"fetchPexels"],[9,28,3,26,"fetchPexels"],[9,29,3,27,"query"],[9,34,3,40],[9,36,3,66],[10,4,4,2],[10,8,4,6],[11,6,5,4],[11,12,5,10,"res"],[11,15,5,13],[11,18,5,16],[11,24,5,22,"fetch"],[11,29,5,27],[11,30,5,28],[11,72,5,70,"encodeURIComponent"],[11,90,5,88],[11,91,5,89,"query"],[11,96,5,94],[11,97,5,95],[11,110,5,108],[11,112,5,110],[12,8,6,6,"headers"],[12,15,6,13],[12,17,6,15],[13,10,6,17,"Authorization"],[13,23,6,30],[13,25,6,32,"PEXELS_KEY"],[13,29,6,42],[13,30,6,42,"PEXELS_KEY"],[14,8,6,43],[15,6,7,4],[15,7,7,5],[15,8,7,6],[16,6,8,4],[16,10,8,8],[16,11,8,9,"res"],[16,14,8,12],[16,15,8,13,"ok"],[16,17,8,15],[16,19,8,17],[16,26,8,24],[16,30,8,28],[17,6,9,4],[17,12,9,10,"json"],[17,16,9,14],[17,19,9,17],[17,25,9,23,"res"],[17,28,9,26],[17,29,9,27,"json"],[17,33,9,31],[17,34,9,32],[17,35,9,33],[18,6,10,4],[18,12,10,10,"url"],[18,15,10,13],[18,18,10,16,"json"],[18,22,10,20],[18,24,10,22,"photos"],[18,30,10,28],[18,33,10,31],[18,34,10,32],[18,35,10,33],[18,37,10,35,"src"],[18,40,10,38],[18,42,10,40,"large"],[18,47,10,45],[18,51,10,49,"json"],[18,55,10,53],[18,57,10,55,"photos"],[18,63,10,61],[18,66,10,64],[18,67,10,65],[18,68,10,66],[18,70,10,68,"src"],[18,73,10,71],[18,75,10,73,"original"],[18,83,10,81],[19,6,11,4],[19,10,11,8],[19,11,11,9,"url"],[19,14,11,12],[19,16,11,14],[19,23,11,21],[19,27,11,25],[20,6,12,4],[20,12,12,10,"img"],[20,15,12,13],[20,18,12,16],[20,24,12,22,"fetch"],[20,29,12,27],[20,30,12,28,"url"],[20,33,12,31],[20,34,12,32],[21,6,13,4],[21,12,13,10,"blob"],[21,16,13,14],[21,19,13,17],[21,25,13,23,"img"],[21,28,13,26],[21,29,13,27,"blob"],[21,33,13,31],[21,34,13,32],[21,35,13,33],[22,6,14,4],[22,12,14,10,"base64"],[22,18,14,16],[22,21,14,19],[22,27,14,25,"blobToBase64"],[22,39,14,37],[22,40,14,38,"blob"],[22,44,14,42],[22,45,14,43],[23,6,15,4],[23,13,15,11,"base64"],[23,19,15,17],[24,4,16,2],[24,5,16,3],[24,6,16,4],[24,12,16,10],[25,6,17,4],[25,13,17,11],[25,17,17,15],[26,4,18,2],[27,2,19,0],[28,2,21,0],[28,17,21,15,"fetchUnsplash"],[28,30,21,28,"fetchUnsplash"],[28,31,21,29,"query"],[28,36,21,42],[28,38,21,68],[29,4,22,2],[29,10,22,8,"clientId"],[29,18,22,16],[29,21,22,19,"UNSPLASH_KEYS"],[29,25,22,32],[29,26,22,32,"UNSPLASH_KEYS"],[29,39,22,32],[29,40,22,33],[29,41,22,34],[29,42,22,35],[30,4,23,2],[30,8,23,6],[31,6,24,4],[31,12,24,10,"res"],[31,15,24,13],[31,18,24,16],[31,24,24,22,"fetch"],[31,29,24,27],[31,30,24,28],[31,78,24,76,"encodeURIComponent"],[31,96,24,94],[31,97,24,95,"query"],[31,102,24,100],[31,103,24,101],[31,128,24,126,"clientId"],[31,136,24,134],[31,138,24,136],[31,139,24,137],[32,6,25,4],[32,10,25,8],[32,11,25,9,"res"],[32,14,25,12],[32,15,25,13,"ok"],[32,17,25,15],[32,19,25,17],[32,26,25,24],[32,30,25,28],[33,6,26,4],[33,12,26,10,"json"],[33,16,26,14],[33,19,26,17],[33,25,26,23,"res"],[33,28,26,26],[33,29,26,27,"json"],[33,33,26,31],[33,34,26,32],[33,35,26,33],[34,6,27,4],[34,12,27,10,"url"],[34,15,27,13],[34,18,27,16,"json"],[34,22,27,20],[34,24,27,22,"results"],[34,31,27,29],[34,34,27,32],[34,35,27,33],[34,36,27,34],[34,38,27,36,"urls"],[34,42,27,40],[34,44,27,42,"regular"],[34,51,27,49],[34,55,27,53,"json"],[34,59,27,57],[34,61,27,59,"results"],[34,68,27,66],[34,71,27,69],[34,72,27,70],[34,73,27,71],[34,75,27,73,"urls"],[34,79,27,77],[34,81,27,79,"full"],[34,85,27,83],[35,6,28,4],[35,10,28,8],[35,11,28,9,"url"],[35,14,28,12],[35,16,28,14],[35,23,28,21],[35,27,28,25],[36,6,29,4],[36,12,29,10,"img"],[36,15,29,13],[36,18,29,16],[36,24,29,22,"fetch"],[36,29,29,27],[36,30,29,28,"url"],[36,33,29,31],[36,34,29,32],[37,6,30,4],[37,12,30,10,"blob"],[37,16,30,14],[37,19,30,17],[37,25,30,23,"img"],[37,28,30,26],[37,29,30,27,"blob"],[37,33,30,31],[37,34,30,32],[37,35,30,33],[38,6,31,4],[38,12,31,10,"base64"],[38,18,31,16],[38,21,31,19],[38,27,31,25,"blobToBase64"],[38,39,31,37],[38,40,31,38,"blob"],[38,44,31,42],[38,45,31,43],[39,6,32,4],[39,13,32,11,"base64"],[39,19,32,17],[40,4,33,2],[40,5,33,3],[40,6,33,4],[40,12,33,10],[41,6,34,4],[41,13,34,11],[41,17,34,15],[42,4,35,2],[43,2,36,0],[44,2,38,0],[44,11,38,9,"blobToBase64"],[44,23,38,21,"blobToBase64"],[44,24,38,22,"blob"],[44,28,38,32],[44,30,38,51],[45,4,39,2],[45,11,39,9],[45,15,39,13,"Promise"],[45,22,39,20],[45,23,39,21],[45,24,39,22,"resolve"],[45,31,39,29],[45,33,39,31,"reject"],[45,39,39,37],[45,44,39,42],[46,6,40,4],[46,12,40,10,"reader"],[46,18,40,28],[46,21,40,31],[46,25,40,35,"FileReader"],[46,35,40,45],[46,36,40,46],[46,37,40,47],[47,6,41,4,"reader"],[47,12,41,10],[47,13,41,11,"onloadend"],[47,22,41,20],[47,25,41,23],[47,31,41,29],[48,8,42,6],[48,14,42,12,"base64"],[48,20,42,18],[48,23,42,22,"reader"],[48,29,42,28],[48,30,42,29,"result"],[48,36,42,35],[48,37,42,47,"split"],[48,42,42,52],[48,43,42,53],[48,46,42,56],[48,47,42,57],[48,48,42,58],[48,49,42,59],[48,50,42,60],[49,8,43,6,"resolve"],[49,15,43,13],[49,16,43,14,"base64"],[49,22,43,20],[49,23,43,21],[50,6,44,4],[50,7,44,5],[51,6,45,4,"reader"],[51,12,45,10],[51,13,45,11,"onerror"],[51,20,45,18],[51,23,45,21,"reject"],[51,29,45,27],[52,6,46,4,"reader"],[52,12,46,10],[52,13,46,11,"readAsDataURL"],[52,26,46,24],[52,27,46,25,"blob"],[52,31,46,29],[52,32,46,30],[53,4,47,2],[53,5,47,3],[53,6,47,4],[54,2,48,0],[55,2,50,7],[55,17,50,22,"getBase64ForPlace"],[55,34,50,39,"getBase64ForPlace"],[55,35,50,40,"query"],[55,40,50,53],[55,42,50,79],[56,4,51,2],[57,4,52,2],[57,8,52,6,"img"],[57,11,52,9],[57,14,52,12],[57,20,52,18,"fetchPexels"],[57,31,52,29],[57,32,52,30,"query"],[57,37,52,35],[57,38,52,36],[58,4,53,2],[58,8,53,6,"img"],[58,11,53,9],[58,13,53,11],[58,20,53,18,"img"],[58,23,53,21],[59,4,54,2,"img"],[59,7,54,5],[59,10,54,8],[59,16,54,14,"fetchUnsplash"],[59,29,54,27],[59,30,54,28,"query"],[59,35,54,33],[59,36,54,34],[60,4,55,2],[60,11,55,9,"img"],[60,14,55,12],[61,2,56,0],[62,0,56,1],[62,3]],"functionMap":{"names":["<global>","fetchPexels","fetchUnsplash","blobToBase64","Promise$argument_0","reader.onloadend","getBase64ForPlace"],"mappings":"AAA;ACE;CDgB;AEE;CFe;AGE;qBCC;uBCE;KDG;GDG;CHC;OME"},"hasCjsExports":false},"type":"js/module"}]}