{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"./env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":50,"index":50}}],"key":"dhYnhmtx0Ij5vR3SSIalcSex/FI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.getBase64ForPlace = getBase64ForPlace;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _env = require(_dependencyMap[1], \"./env\");\n  function fetchPexels(_x) {\n    return _fetchPexels.apply(this, arguments);\n  }\n  function _fetchPexels() {\n    _fetchPexels = (0, _asyncToGenerator.default)(function* (query) {\n      try {\n        var res = yield fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}&per_page=1`, {\n          headers: {\n            Authorization: _env.PEXELS_KEY\n          }\n        });\n        if (!res.ok) return null;\n        var json = yield res.json();\n        var src = json?.photos?.[0]?.src;\n        var url = src?.large2x || src?.large || src?.original;\n        if (!url) return null;\n        var img = yield fetch(url);\n        var blob = yield img.blob();\n        var base64 = yield blobToBase64(blob);\n        return base64;\n      } catch {\n        return null;\n      }\n    });\n    return _fetchPexels.apply(this, arguments);\n  }\n  function fetchUnsplash(_x2) {\n    return _fetchUnsplash.apply(this, arguments);\n  }\n  function _fetchUnsplash() {\n    _fetchUnsplash = (0, _asyncToGenerator.default)(function* (query) {\n      var clientId = _env.UNSPLASH_KEYS[0];\n      try {\n        var res = yield fetch(`https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=1&client_id=${clientId}`);\n        if (!res.ok) return null;\n        var json = yield res.json();\n        var urls = json?.results?.[0]?.urls;\n        var url = urls?.full || urls?.regular || urls?.small;\n        if (!url) return null;\n        var img = yield fetch(url);\n        var blob = yield img.blob();\n        var base64 = yield blobToBase64(blob);\n        return base64;\n      } catch {\n        return null;\n      }\n    });\n    return _fetchUnsplash.apply(this, arguments);\n  }\n  function blobToBase64(blob) {\n    return new Promise((resolve, reject) => {\n      var reader = new FileReader();\n      reader.onloadend = () => {\n        var base64 = reader.result.split(',')[1];\n        resolve(base64);\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  }\n  function getBase64ForPlace(_x3) {\n    return _getBase64ForPlace.apply(this, arguments);\n  }\n  function _getBase64ForPlace() {\n    _getBase64ForPlace = (0, _asyncToGenerator.default)(function* (query) {\n      // Try Pexels first, fallback to Unsplash\n      var img = yield fetchPexels(query);\n      if (img) return img;\n      img = yield fetchUnsplash(query);\n      return img;\n    });\n    return _getBase64ForPlace.apply(this, arguments);\n  }\n});","lineCount":89,"map":[[12,2,52,0,"exports"],[12,9,52,0],[12,10,52,0,"getBase64ForPlace"],[12,27,52,0],[12,30,52,0,"getBase64ForPlace"],[12,47,52,0],[13,2,58,1],[13,6,58,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,58,1],[13,45,58,1,"require"],[13,52,58,1],[13,53,58,1,"_dependencyMap"],[13,67,58,1],[14,2,58,1],[14,6,58,1,"_asyncToGenerator"],[14,23,58,1],[14,26,58,1,"_interopDefault"],[14,41,58,1],[14,42,58,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,58,1],[15,2,1,0],[15,6,1,0,"_env"],[15,10,1,0],[15,13,1,0,"require"],[15,20,1,0],[15,21,1,0,"_dependencyMap"],[15,35,1,0],[16,2,1,50],[16,11,3,15,"fetchPexels"],[16,22,3,26,"fetchPexels"],[16,23,3,26,"_x"],[16,25,3,26],[17,4,3,26],[17,11,3,26,"_fetchPexels"],[17,23,3,26],[17,24,3,26,"apply"],[17,29,3,26],[17,36,3,26,"arguments"],[17,45,3,26],[18,2,3,26],[19,2,3,26],[19,11,3,26,"_fetchPexels"],[19,24,3,26],[20,4,3,26,"_fetchPexels"],[20,16,3,26],[20,23,3,26,"_asyncToGenerator"],[20,40,3,26],[20,41,3,26,"default"],[20,48,3,26],[20,50,3,0],[20,61,3,27,"query"],[20,66,3,40],[20,68,3,66],[21,6,4,2],[21,10,4,6],[22,8,5,4],[22,12,5,10,"res"],[22,15,5,13],[22,24,5,22,"fetch"],[22,29,5,27],[22,30,5,28],[22,72,5,70,"encodeURIComponent"],[22,90,5,88],[22,91,5,89,"query"],[22,96,5,94],[22,97,5,95],[22,110,5,108],[22,112,5,110],[23,10,6,6,"headers"],[23,17,6,13],[23,19,6,15],[24,12,6,17,"Authorization"],[24,25,6,30],[24,27,6,32,"PEXELS_KEY"],[24,31,6,42],[24,32,6,42,"PEXELS_KEY"],[25,10,6,43],[26,8,7,4],[26,9,7,5],[26,10,7,6],[27,8,8,4],[27,12,8,8],[27,13,8,9,"res"],[27,16,8,12],[27,17,8,13,"ok"],[27,19,8,15],[27,21,8,17],[27,28,8,24],[27,32,8,28],[28,8,9,4],[28,12,9,10,"json"],[28,16,9,14],[28,25,9,23,"res"],[28,28,9,26],[28,29,9,27,"json"],[28,33,9,31],[28,34,9,32],[28,35,9,33],[29,8,10,4],[29,12,10,10,"src"],[29,15,10,13],[29,18,10,16,"json"],[29,22,10,20],[29,24,10,22,"photos"],[29,30,10,28],[29,33,10,31],[29,34,10,32],[29,35,10,33],[29,37,10,35,"src"],[29,40,10,38],[30,8,11,4],[30,12,11,10,"url"],[30,15,11,13],[30,18,11,16,"src"],[30,21,11,19],[30,23,11,21,"large2x"],[30,30,11,28],[30,34,11,32,"src"],[30,37,11,35],[30,39,11,37,"large"],[30,44,11,42],[30,48,11,46,"src"],[30,51,11,49],[30,53,11,51,"original"],[30,61,11,59],[31,8,12,4],[31,12,12,8],[31,13,12,9,"url"],[31,16,12,12],[31,18,12,14],[31,25,12,21],[31,29,12,25],[32,8,13,4],[32,12,13,10,"img"],[32,15,13,13],[32,24,13,22,"fetch"],[32,29,13,27],[32,30,13,28,"url"],[32,33,13,31],[32,34,13,32],[33,8,14,4],[33,12,14,10,"blob"],[33,16,14,14],[33,25,14,23,"img"],[33,28,14,26],[33,29,14,27,"blob"],[33,33,14,31],[33,34,14,32],[33,35,14,33],[34,8,15,4],[34,12,15,10,"base64"],[34,18,15,16],[34,27,15,25,"blobToBase64"],[34,39,15,37],[34,40,15,38,"blob"],[34,44,15,42],[34,45,15,43],[35,8,16,4],[35,15,16,11,"base64"],[35,21,16,17],[36,6,17,2],[36,7,17,3],[36,8,17,4],[36,14,17,10],[37,8,18,4],[37,15,18,11],[37,19,18,15],[38,6,19,2],[39,4,20,0],[39,5,20,1],[40,4,20,1],[40,11,20,1,"_fetchPexels"],[40,23,20,1],[40,24,20,1,"apply"],[40,29,20,1],[40,36,20,1,"arguments"],[40,45,20,1],[41,2,20,1],[42,2,20,1],[42,11,22,15,"fetchUnsplash"],[42,24,22,28,"fetchUnsplash"],[42,25,22,28,"_x2"],[42,28,22,28],[43,4,22,28],[43,11,22,28,"_fetchUnsplash"],[43,25,22,28],[43,26,22,28,"apply"],[43,31,22,28],[43,38,22,28,"arguments"],[43,47,22,28],[44,2,22,28],[45,2,22,28],[45,11,22,28,"_fetchUnsplash"],[45,26,22,28],[46,4,22,28,"_fetchUnsplash"],[46,18,22,28],[46,25,22,28,"_asyncToGenerator"],[46,42,22,28],[46,43,22,28,"default"],[46,50,22,28],[46,52,22,0],[46,63,22,29,"query"],[46,68,22,42],[46,70,22,68],[47,6,23,2],[47,10,23,8,"clientId"],[47,18,23,16],[47,21,23,19,"UNSPLASH_KEYS"],[47,25,23,32],[47,26,23,32,"UNSPLASH_KEYS"],[47,39,23,32],[47,40,23,33],[47,41,23,34],[47,42,23,35],[48,6,24,2],[48,10,24,6],[49,8,25,4],[49,12,25,10,"res"],[49,15,25,13],[49,24,25,22,"fetch"],[49,29,25,27],[49,30,25,28],[49,78,25,76,"encodeURIComponent"],[49,96,25,94],[49,97,25,95,"query"],[49,102,25,100],[49,103,25,101],[49,128,25,126,"clientId"],[49,136,25,134],[49,138,25,136],[49,139,25,137],[50,8,26,4],[50,12,26,8],[50,13,26,9,"res"],[50,16,26,12],[50,17,26,13,"ok"],[50,19,26,15],[50,21,26,17],[50,28,26,24],[50,32,26,28],[51,8,27,4],[51,12,27,10,"json"],[51,16,27,14],[51,25,27,23,"res"],[51,28,27,26],[51,29,27,27,"json"],[51,33,27,31],[51,34,27,32],[51,35,27,33],[52,8,28,4],[52,12,28,10,"urls"],[52,16,28,14],[52,19,28,17,"json"],[52,23,28,21],[52,25,28,23,"results"],[52,32,28,30],[52,35,28,33],[52,36,28,34],[52,37,28,35],[52,39,28,37,"urls"],[52,43,28,41],[53,8,29,4],[53,12,29,10,"url"],[53,15,29,13],[53,18,29,16,"urls"],[53,22,29,20],[53,24,29,22,"full"],[53,28,29,26],[53,32,29,30,"urls"],[53,36,29,34],[53,38,29,36,"regular"],[53,45,29,43],[53,49,29,47,"urls"],[53,53,29,51],[53,55,29,53,"small"],[53,60,29,58],[54,8,30,4],[54,12,30,8],[54,13,30,9,"url"],[54,16,30,12],[54,18,30,14],[54,25,30,21],[54,29,30,25],[55,8,31,4],[55,12,31,10,"img"],[55,15,31,13],[55,24,31,22,"fetch"],[55,29,31,27],[55,30,31,28,"url"],[55,33,31,31],[55,34,31,32],[56,8,32,4],[56,12,32,10,"blob"],[56,16,32,14],[56,25,32,23,"img"],[56,28,32,26],[56,29,32,27,"blob"],[56,33,32,31],[56,34,32,32],[56,35,32,33],[57,8,33,4],[57,12,33,10,"base64"],[57,18,33,16],[57,27,33,25,"blobToBase64"],[57,39,33,37],[57,40,33,38,"blob"],[57,44,33,42],[57,45,33,43],[58,8,34,4],[58,15,34,11,"base64"],[58,21,34,17],[59,6,35,2],[59,7,35,3],[59,8,35,4],[59,14,35,10],[60,8,36,4],[60,15,36,11],[60,19,36,15],[61,6,37,2],[62,4,38,0],[62,5,38,1],[63,4,38,1],[63,11,38,1,"_fetchUnsplash"],[63,25,38,1],[63,26,38,1,"apply"],[63,31,38,1],[63,38,38,1,"arguments"],[63,47,38,1],[64,2,38,1],[65,2,40,0],[65,11,40,9,"blobToBase64"],[65,23,40,21,"blobToBase64"],[65,24,40,22,"blob"],[65,28,40,32],[65,30,40,51],[66,4,41,2],[66,11,41,9],[66,15,41,13,"Promise"],[66,22,41,20],[66,23,41,21],[66,24,41,22,"resolve"],[66,31,41,29],[66,33,41,31,"reject"],[66,39,41,37],[66,44,41,42],[67,6,42,4],[67,10,42,10,"reader"],[67,16,42,28],[67,19,42,31],[67,23,42,35,"FileReader"],[67,33,42,45],[67,34,42,46],[67,35,42,47],[68,6,43,4,"reader"],[68,12,43,10],[68,13,43,11,"onloadend"],[68,22,43,20],[68,25,43,23],[68,31,43,29],[69,8,44,6],[69,12,44,12,"base64"],[69,18,44,18],[69,21,44,22,"reader"],[69,27,44,28],[69,28,44,29,"result"],[69,34,44,35],[69,35,44,47,"split"],[69,40,44,52],[69,41,44,53],[69,44,44,56],[69,45,44,57],[69,46,44,58],[69,47,44,59],[69,48,44,60],[70,8,45,6,"resolve"],[70,15,45,13],[70,16,45,14,"base64"],[70,22,45,20],[70,23,45,21],[71,6,46,4],[71,7,46,5],[72,6,47,4,"reader"],[72,12,47,10],[72,13,47,11,"onerror"],[72,20,47,18],[72,23,47,21,"reject"],[72,29,47,27],[73,6,48,4,"reader"],[73,12,48,10],[73,13,48,11,"readAsDataURL"],[73,26,48,24],[73,27,48,25,"blob"],[73,31,48,29],[73,32,48,30],[74,4,49,2],[74,5,49,3],[74,6,49,4],[75,2,50,0],[76,2,50,1],[76,11,52,22,"getBase64ForPlace"],[76,28,52,39,"getBase64ForPlace"],[76,29,52,39,"_x3"],[76,32,52,39],[77,4,52,39],[77,11,52,39,"_getBase64ForPlace"],[77,29,52,39],[77,30,52,39,"apply"],[77,35,52,39],[77,42,52,39,"arguments"],[77,51,52,39],[78,2,52,39],[79,2,52,39],[79,11,52,39,"_getBase64ForPlace"],[79,30,52,39],[80,4,52,39,"_getBase64ForPlace"],[80,22,52,39],[80,29,52,39,"_asyncToGenerator"],[80,46,52,39],[80,47,52,39,"default"],[80,54,52,39],[80,56,52,7],[80,67,52,40,"query"],[80,72,52,53],[80,74,52,79],[81,6,53,2],[82,6,54,2],[82,10,54,6,"img"],[82,13,54,9],[82,22,54,18,"fetchPexels"],[82,33,54,29],[82,34,54,30,"query"],[82,39,54,35],[82,40,54,36],[83,6,55,2],[83,10,55,6,"img"],[83,13,55,9],[83,15,55,11],[83,22,55,18,"img"],[83,25,55,21],[84,6,56,2,"img"],[84,9,56,5],[84,18,56,14,"fetchUnsplash"],[84,31,56,27],[84,32,56,28,"query"],[84,37,56,33],[84,38,56,34],[85,6,57,2],[85,13,57,9,"img"],[85,16,57,12],[86,4,58,0],[86,5,58,1],[87,4,58,1],[87,11,58,1,"_getBase64ForPlace"],[87,29,58,1],[87,30,58,1,"apply"],[87,35,58,1],[87,42,58,1,"arguments"],[87,51,58,1],[88,2,58,1],[89,0,58,1],[89,3]],"functionMap":{"names":["<global>","fetchPexels","fetchUnsplash","blobToBase64","Promise$argument_0","reader.onloadend","getBase64ForPlace"],"mappings":"AAA;ACE;CDiB;AEE;CFgB;AGE;qBCC;uBCE;KDG;GDG;CHC;OME"},"hasCjsExports":false},"type":"js/module"}]}