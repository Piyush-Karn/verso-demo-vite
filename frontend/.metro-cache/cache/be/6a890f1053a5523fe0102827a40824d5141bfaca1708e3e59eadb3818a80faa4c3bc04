{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"./env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":50,"index":50}}],"key":"dhYnhmtx0Ij5vR3SSIalcSex/FI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.getBase64ForPlace = getBase64ForPlace;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _env = require(_dependencyMap[1], \"./env\");\n  function fetchPexels(_x) {\n    return _fetchPexels.apply(this, arguments);\n  }\n  function _fetchPexels() {\n    _fetchPexels = (0, _asyncToGenerator.default)(function* (query) {\n      try {\n        var res = yield fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}&per_page=1`, {\n          headers: {\n            Authorization: _env.PEXELS_KEY\n          }\n        });\n        if (!res.ok) return null;\n        var json = yield res.json();\n        var url = json?.photos?.[0]?.src?.large || json?.photos?.[0]?.src?.original;\n        if (!url) return null;\n        var img = yield fetch(url);\n        var blob = yield img.blob();\n        var base64 = yield blobToBase64(blob);\n        return base64;\n      } catch {\n        return null;\n      }\n    });\n    return _fetchPexels.apply(this, arguments);\n  }\n  function fetchUnsplash(_x2) {\n    return _fetchUnsplash.apply(this, arguments);\n  }\n  function _fetchUnsplash() {\n    _fetchUnsplash = (0, _asyncToGenerator.default)(function* (query) {\n      var clientId = _env.UNSPLASH_KEYS[0];\n      try {\n        var res = yield fetch(`https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=1&client_id=${clientId}`);\n        if (!res.ok) return null;\n        var json = yield res.json();\n        var url = json?.results?.[0]?.urls?.regular || json?.results?.[0]?.urls?.full;\n        if (!url) return null;\n        var img = yield fetch(url);\n        var blob = yield img.blob();\n        var base64 = yield blobToBase64(blob);\n        return base64;\n      } catch {\n        return null;\n      }\n    });\n    return _fetchUnsplash.apply(this, arguments);\n  }\n  function blobToBase64(blob) {\n    return new Promise((resolve, reject) => {\n      var reader = new FileReader();\n      reader.onloadend = () => {\n        var base64 = reader.result.split(',')[1];\n        resolve(base64);\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  }\n  function getBase64ForPlace(_x3) {\n    return _getBase64ForPlace.apply(this, arguments);\n  }\n  function _getBase64ForPlace() {\n    _getBase64ForPlace = (0, _asyncToGenerator.default)(function* (query) {\n      // Try Pexels first, fallback to Unsplash\n      var img = yield fetchPexels(query);\n      if (img) return img;\n      img = yield fetchUnsplash(query);\n      return img;\n    });\n    return _getBase64ForPlace.apply(this, arguments);\n  }\n});","lineCount":87,"map":[[12,2,50,0,"exports"],[12,9,50,0],[12,10,50,0,"getBase64ForPlace"],[12,27,50,0],[12,30,50,0,"getBase64ForPlace"],[12,47,50,0],[13,2,56,1],[13,6,56,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,56,1],[13,45,56,1,"require"],[13,52,56,1],[13,53,56,1,"_dependencyMap"],[13,67,56,1],[14,2,56,1],[14,6,56,1,"_asyncToGenerator"],[14,23,56,1],[14,26,56,1,"_interopDefault"],[14,41,56,1],[14,42,56,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,56,1],[15,2,1,0],[15,6,1,0,"_env"],[15,10,1,0],[15,13,1,0,"require"],[15,20,1,0],[15,21,1,0,"_dependencyMap"],[15,35,1,0],[16,2,1,50],[16,11,3,15,"fetchPexels"],[16,22,3,26,"fetchPexels"],[16,23,3,26,"_x"],[16,25,3,26],[17,4,3,26],[17,11,3,26,"_fetchPexels"],[17,23,3,26],[17,24,3,26,"apply"],[17,29,3,26],[17,36,3,26,"arguments"],[17,45,3,26],[18,2,3,26],[19,2,3,26],[19,11,3,26,"_fetchPexels"],[19,24,3,26],[20,4,3,26,"_fetchPexels"],[20,16,3,26],[20,23,3,26,"_asyncToGenerator"],[20,40,3,26],[20,41,3,26,"default"],[20,48,3,26],[20,50,3,0],[20,61,3,27,"query"],[20,66,3,40],[20,68,3,66],[21,6,4,2],[21,10,4,6],[22,8,5,4],[22,12,5,10,"res"],[22,15,5,13],[22,24,5,22,"fetch"],[22,29,5,27],[22,30,5,28],[22,72,5,70,"encodeURIComponent"],[22,90,5,88],[22,91,5,89,"query"],[22,96,5,94],[22,97,5,95],[22,110,5,108],[22,112,5,110],[23,10,6,6,"headers"],[23,17,6,13],[23,19,6,15],[24,12,6,17,"Authorization"],[24,25,6,30],[24,27,6,32,"PEXELS_KEY"],[24,31,6,42],[24,32,6,42,"PEXELS_KEY"],[25,10,6,43],[26,8,7,4],[26,9,7,5],[26,10,7,6],[27,8,8,4],[27,12,8,8],[27,13,8,9,"res"],[27,16,8,12],[27,17,8,13,"ok"],[27,19,8,15],[27,21,8,17],[27,28,8,24],[27,32,8,28],[28,8,9,4],[28,12,9,10,"json"],[28,16,9,14],[28,25,9,23,"res"],[28,28,9,26],[28,29,9,27,"json"],[28,33,9,31],[28,34,9,32],[28,35,9,33],[29,8,10,4],[29,12,10,10,"url"],[29,15,10,13],[29,18,10,16,"json"],[29,22,10,20],[29,24,10,22,"photos"],[29,30,10,28],[29,33,10,31],[29,34,10,32],[29,35,10,33],[29,37,10,35,"src"],[29,40,10,38],[29,42,10,40,"large"],[29,47,10,45],[29,51,10,49,"json"],[29,55,10,53],[29,57,10,55,"photos"],[29,63,10,61],[29,66,10,64],[29,67,10,65],[29,68,10,66],[29,70,10,68,"src"],[29,73,10,71],[29,75,10,73,"original"],[29,83,10,81],[30,8,11,4],[30,12,11,8],[30,13,11,9,"url"],[30,16,11,12],[30,18,11,14],[30,25,11,21],[30,29,11,25],[31,8,12,4],[31,12,12,10,"img"],[31,15,12,13],[31,24,12,22,"fetch"],[31,29,12,27],[31,30,12,28,"url"],[31,33,12,31],[31,34,12,32],[32,8,13,4],[32,12,13,10,"blob"],[32,16,13,14],[32,25,13,23,"img"],[32,28,13,26],[32,29,13,27,"blob"],[32,33,13,31],[32,34,13,32],[32,35,13,33],[33,8,14,4],[33,12,14,10,"base64"],[33,18,14,16],[33,27,14,25,"blobToBase64"],[33,39,14,37],[33,40,14,38,"blob"],[33,44,14,42],[33,45,14,43],[34,8,15,4],[34,15,15,11,"base64"],[34,21,15,17],[35,6,16,2],[35,7,16,3],[35,8,16,4],[35,14,16,10],[36,8,17,4],[36,15,17,11],[36,19,17,15],[37,6,18,2],[38,4,19,0],[38,5,19,1],[39,4,19,1],[39,11,19,1,"_fetchPexels"],[39,23,19,1],[39,24,19,1,"apply"],[39,29,19,1],[39,36,19,1,"arguments"],[39,45,19,1],[40,2,19,1],[41,2,19,1],[41,11,21,15,"fetchUnsplash"],[41,24,21,28,"fetchUnsplash"],[41,25,21,28,"_x2"],[41,28,21,28],[42,4,21,28],[42,11,21,28,"_fetchUnsplash"],[42,25,21,28],[42,26,21,28,"apply"],[42,31,21,28],[42,38,21,28,"arguments"],[42,47,21,28],[43,2,21,28],[44,2,21,28],[44,11,21,28,"_fetchUnsplash"],[44,26,21,28],[45,4,21,28,"_fetchUnsplash"],[45,18,21,28],[45,25,21,28,"_asyncToGenerator"],[45,42,21,28],[45,43,21,28,"default"],[45,50,21,28],[45,52,21,0],[45,63,21,29,"query"],[45,68,21,42],[45,70,21,68],[46,6,22,2],[46,10,22,8,"clientId"],[46,18,22,16],[46,21,22,19,"UNSPLASH_KEYS"],[46,25,22,32],[46,26,22,32,"UNSPLASH_KEYS"],[46,39,22,32],[46,40,22,33],[46,41,22,34],[46,42,22,35],[47,6,23,2],[47,10,23,6],[48,8,24,4],[48,12,24,10,"res"],[48,15,24,13],[48,24,24,22,"fetch"],[48,29,24,27],[48,30,24,28],[48,78,24,76,"encodeURIComponent"],[48,96,24,94],[48,97,24,95,"query"],[48,102,24,100],[48,103,24,101],[48,128,24,126,"clientId"],[48,136,24,134],[48,138,24,136],[48,139,24,137],[49,8,25,4],[49,12,25,8],[49,13,25,9,"res"],[49,16,25,12],[49,17,25,13,"ok"],[49,19,25,15],[49,21,25,17],[49,28,25,24],[49,32,25,28],[50,8,26,4],[50,12,26,10,"json"],[50,16,26,14],[50,25,26,23,"res"],[50,28,26,26],[50,29,26,27,"json"],[50,33,26,31],[50,34,26,32],[50,35,26,33],[51,8,27,4],[51,12,27,10,"url"],[51,15,27,13],[51,18,27,16,"json"],[51,22,27,20],[51,24,27,22,"results"],[51,31,27,29],[51,34,27,32],[51,35,27,33],[51,36,27,34],[51,38,27,36,"urls"],[51,42,27,40],[51,44,27,42,"regular"],[51,51,27,49],[51,55,27,53,"json"],[51,59,27,57],[51,61,27,59,"results"],[51,68,27,66],[51,71,27,69],[51,72,27,70],[51,73,27,71],[51,75,27,73,"urls"],[51,79,27,77],[51,81,27,79,"full"],[51,85,27,83],[52,8,28,4],[52,12,28,8],[52,13,28,9,"url"],[52,16,28,12],[52,18,28,14],[52,25,28,21],[52,29,28,25],[53,8,29,4],[53,12,29,10,"img"],[53,15,29,13],[53,24,29,22,"fetch"],[53,29,29,27],[53,30,29,28,"url"],[53,33,29,31],[53,34,29,32],[54,8,30,4],[54,12,30,10,"blob"],[54,16,30,14],[54,25,30,23,"img"],[54,28,30,26],[54,29,30,27,"blob"],[54,33,30,31],[54,34,30,32],[54,35,30,33],[55,8,31,4],[55,12,31,10,"base64"],[55,18,31,16],[55,27,31,25,"blobToBase64"],[55,39,31,37],[55,40,31,38,"blob"],[55,44,31,42],[55,45,31,43],[56,8,32,4],[56,15,32,11,"base64"],[56,21,32,17],[57,6,33,2],[57,7,33,3],[57,8,33,4],[57,14,33,10],[58,8,34,4],[58,15,34,11],[58,19,34,15],[59,6,35,2],[60,4,36,0],[60,5,36,1],[61,4,36,1],[61,11,36,1,"_fetchUnsplash"],[61,25,36,1],[61,26,36,1,"apply"],[61,31,36,1],[61,38,36,1,"arguments"],[61,47,36,1],[62,2,36,1],[63,2,38,0],[63,11,38,9,"blobToBase64"],[63,23,38,21,"blobToBase64"],[63,24,38,22,"blob"],[63,28,38,32],[63,30,38,51],[64,4,39,2],[64,11,39,9],[64,15,39,13,"Promise"],[64,22,39,20],[64,23,39,21],[64,24,39,22,"resolve"],[64,31,39,29],[64,33,39,31,"reject"],[64,39,39,37],[64,44,39,42],[65,6,40,4],[65,10,40,10,"reader"],[65,16,40,28],[65,19,40,31],[65,23,40,35,"FileReader"],[65,33,40,45],[65,34,40,46],[65,35,40,47],[66,6,41,4,"reader"],[66,12,41,10],[66,13,41,11,"onloadend"],[66,22,41,20],[66,25,41,23],[66,31,41,29],[67,8,42,6],[67,12,42,12,"base64"],[67,18,42,18],[67,21,42,22,"reader"],[67,27,42,28],[67,28,42,29,"result"],[67,34,42,35],[67,35,42,47,"split"],[67,40,42,52],[67,41,42,53],[67,44,42,56],[67,45,42,57],[67,46,42,58],[67,47,42,59],[67,48,42,60],[68,8,43,6,"resolve"],[68,15,43,13],[68,16,43,14,"base64"],[68,22,43,20],[68,23,43,21],[69,6,44,4],[69,7,44,5],[70,6,45,4,"reader"],[70,12,45,10],[70,13,45,11,"onerror"],[70,20,45,18],[70,23,45,21,"reject"],[70,29,45,27],[71,6,46,4,"reader"],[71,12,46,10],[71,13,46,11,"readAsDataURL"],[71,26,46,24],[71,27,46,25,"blob"],[71,31,46,29],[71,32,46,30],[72,4,47,2],[72,5,47,3],[72,6,47,4],[73,2,48,0],[74,2,48,1],[74,11,50,22,"getBase64ForPlace"],[74,28,50,39,"getBase64ForPlace"],[74,29,50,39,"_x3"],[74,32,50,39],[75,4,50,39],[75,11,50,39,"_getBase64ForPlace"],[75,29,50,39],[75,30,50,39,"apply"],[75,35,50,39],[75,42,50,39,"arguments"],[75,51,50,39],[76,2,50,39],[77,2,50,39],[77,11,50,39,"_getBase64ForPlace"],[77,30,50,39],[78,4,50,39,"_getBase64ForPlace"],[78,22,50,39],[78,29,50,39,"_asyncToGenerator"],[78,46,50,39],[78,47,50,39,"default"],[78,54,50,39],[78,56,50,7],[78,67,50,40,"query"],[78,72,50,53],[78,74,50,79],[79,6,51,2],[80,6,52,2],[80,10,52,6,"img"],[80,13,52,9],[80,22,52,18,"fetchPexels"],[80,33,52,29],[80,34,52,30,"query"],[80,39,52,35],[80,40,52,36],[81,6,53,2],[81,10,53,6,"img"],[81,13,53,9],[81,15,53,11],[81,22,53,18,"img"],[81,25,53,21],[82,6,54,2,"img"],[82,9,54,5],[82,18,54,14,"fetchUnsplash"],[82,31,54,27],[82,32,54,28,"query"],[82,37,54,33],[82,38,54,34],[83,6,55,2],[83,13,55,9,"img"],[83,16,55,12],[84,4,56,0],[84,5,56,1],[85,4,56,1],[85,11,56,1,"_getBase64ForPlace"],[85,29,56,1],[85,30,56,1,"apply"],[85,35,56,1],[85,42,56,1,"arguments"],[85,51,56,1],[86,2,56,1],[87,0,56,1],[87,3]],"functionMap":{"names":["<global>","fetchPexels","fetchUnsplash","blobToBase64","Promise$argument_0","reader.onloadend","getBase64ForPlace"],"mappings":"AAA;ACE;CDgB;AEE;CFe;AGE;qBCC;uBCE;KDG;GDG;CHC;OME"},"hasCjsExports":false},"type":"js/module"}]}