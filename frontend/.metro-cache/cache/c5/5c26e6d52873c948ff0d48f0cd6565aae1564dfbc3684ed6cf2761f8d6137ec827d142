{"dependencies":[{"name":"./env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":50,"index":50}}],"key":"dhYnhmtx0Ij5vR3SSIalcSex/FI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getBase64ForPlace = getBase64ForPlace;\n  var _env = require(_dependencyMap[0], \"./env\");\n  async function fetchPexels(query) {\n    try {\n      const res = await fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}&per_page=1`, {\n        headers: {\n          Authorization: _env.PEXELS_KEY\n        }\n      });\n      if (!res.ok) return null;\n      const json = await res.json();\n      const src = json?.photos?.[0]?.src;\n      const url = src?.large2x || src?.large || src?.original;\n      if (!url) return null;\n      const img = await fetch(url);\n      const blob = await img.blob();\n      const base64 = await blobToBase64(blob);\n      return base64;\n    } catch {\n      return null;\n    }\n  }\n  async function fetchUnsplash(query) {\n    const clientId = _env.UNSPLASH_KEYS[0];\n    try {\n      const res = await fetch(`https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=1&client_id=${clientId}`);\n      if (!res.ok) return null;\n      const json = await res.json();\n      const urls = json?.results?.[0]?.urls;\n      const url = urls?.full || urls?.regular || urls?.small;\n      if (!url) return null;\n      const img = await fetch(url);\n      const blob = await img.blob();\n      const base64 = await blobToBase64(blob);\n      return base64;\n    } catch {\n      return null;\n    }\n  }\n  function blobToBase64(blob) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const base64 = reader.result.split(',')[1];\n        resolve(base64);\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  }\n  async function getBase64ForPlace(query) {\n    // Try Pexels first, fallback to Unsplash\n    let img = await fetchPexels(query);\n    if (img) return img;\n    img = await fetchUnsplash(query);\n    return img;\n  }\n});","lineCount":64,"map":[[7,2,52,0,"exports"],[7,9,52,0],[7,10,52,0,"getBase64ForPlace"],[7,27,52,0],[7,30,52,0,"getBase64ForPlace"],[7,47,52,0],[8,2,1,0],[8,6,1,0,"_env"],[8,10,1,0],[8,13,1,0,"require"],[8,20,1,0],[8,21,1,0,"_dependencyMap"],[8,35,1,0],[9,2,3,0],[9,17,3,15,"fetchPexels"],[9,28,3,26,"fetchPexels"],[9,29,3,27,"query"],[9,34,3,40],[9,36,3,66],[10,4,4,2],[10,8,4,6],[11,6,5,4],[11,12,5,10,"res"],[11,15,5,13],[11,18,5,16],[11,24,5,22,"fetch"],[11,29,5,27],[11,30,5,28],[11,72,5,70,"encodeURIComponent"],[11,90,5,88],[11,91,5,89,"query"],[11,96,5,94],[11,97,5,95],[11,110,5,108],[11,112,5,110],[12,8,6,6,"headers"],[12,15,6,13],[12,17,6,15],[13,10,6,17,"Authorization"],[13,23,6,30],[13,25,6,32,"PEXELS_KEY"],[13,29,6,42],[13,30,6,42,"PEXELS_KEY"],[14,8,6,43],[15,6,7,4],[15,7,7,5],[15,8,7,6],[16,6,8,4],[16,10,8,8],[16,11,8,9,"res"],[16,14,8,12],[16,15,8,13,"ok"],[16,17,8,15],[16,19,8,17],[16,26,8,24],[16,30,8,28],[17,6,9,4],[17,12,9,10,"json"],[17,16,9,14],[17,19,9,17],[17,25,9,23,"res"],[17,28,9,26],[17,29,9,27,"json"],[17,33,9,31],[17,34,9,32],[17,35,9,33],[18,6,10,4],[18,12,10,10,"src"],[18,15,10,13],[18,18,10,16,"json"],[18,22,10,20],[18,24,10,22,"photos"],[18,30,10,28],[18,33,10,31],[18,34,10,32],[18,35,10,33],[18,37,10,35,"src"],[18,40,10,38],[19,6,11,4],[19,12,11,10,"url"],[19,15,11,13],[19,18,11,16,"src"],[19,21,11,19],[19,23,11,21,"large2x"],[19,30,11,28],[19,34,11,32,"src"],[19,37,11,35],[19,39,11,37,"large"],[19,44,11,42],[19,48,11,46,"src"],[19,51,11,49],[19,53,11,51,"original"],[19,61,11,59],[20,6,12,4],[20,10,12,8],[20,11,12,9,"url"],[20,14,12,12],[20,16,12,14],[20,23,12,21],[20,27,12,25],[21,6,13,4],[21,12,13,10,"img"],[21,15,13,13],[21,18,13,16],[21,24,13,22,"fetch"],[21,29,13,27],[21,30,13,28,"url"],[21,33,13,31],[21,34,13,32],[22,6,14,4],[22,12,14,10,"blob"],[22,16,14,14],[22,19,14,17],[22,25,14,23,"img"],[22,28,14,26],[22,29,14,27,"blob"],[22,33,14,31],[22,34,14,32],[22,35,14,33],[23,6,15,4],[23,12,15,10,"base64"],[23,18,15,16],[23,21,15,19],[23,27,15,25,"blobToBase64"],[23,39,15,37],[23,40,15,38,"blob"],[23,44,15,42],[23,45,15,43],[24,6,16,4],[24,13,16,11,"base64"],[24,19,16,17],[25,4,17,2],[25,5,17,3],[25,6,17,4],[25,12,17,10],[26,6,18,4],[26,13,18,11],[26,17,18,15],[27,4,19,2],[28,2,20,0],[29,2,22,0],[29,17,22,15,"fetchUnsplash"],[29,30,22,28,"fetchUnsplash"],[29,31,22,29,"query"],[29,36,22,42],[29,38,22,68],[30,4,23,2],[30,10,23,8,"clientId"],[30,18,23,16],[30,21,23,19,"UNSPLASH_KEYS"],[30,25,23,32],[30,26,23,32,"UNSPLASH_KEYS"],[30,39,23,32],[30,40,23,33],[30,41,23,34],[30,42,23,35],[31,4,24,2],[31,8,24,6],[32,6,25,4],[32,12,25,10,"res"],[32,15,25,13],[32,18,25,16],[32,24,25,22,"fetch"],[32,29,25,27],[32,30,25,28],[32,78,25,76,"encodeURIComponent"],[32,96,25,94],[32,97,25,95,"query"],[32,102,25,100],[32,103,25,101],[32,128,25,126,"clientId"],[32,136,25,134],[32,138,25,136],[32,139,25,137],[33,6,26,4],[33,10,26,8],[33,11,26,9,"res"],[33,14,26,12],[33,15,26,13,"ok"],[33,17,26,15],[33,19,26,17],[33,26,26,24],[33,30,26,28],[34,6,27,4],[34,12,27,10,"json"],[34,16,27,14],[34,19,27,17],[34,25,27,23,"res"],[34,28,27,26],[34,29,27,27,"json"],[34,33,27,31],[34,34,27,32],[34,35,27,33],[35,6,28,4],[35,12,28,10,"urls"],[35,16,28,14],[35,19,28,17,"json"],[35,23,28,21],[35,25,28,23,"results"],[35,32,28,30],[35,35,28,33],[35,36,28,34],[35,37,28,35],[35,39,28,37,"urls"],[35,43,28,41],[36,6,29,4],[36,12,29,10,"url"],[36,15,29,13],[36,18,29,16,"urls"],[36,22,29,20],[36,24,29,22,"full"],[36,28,29,26],[36,32,29,30,"urls"],[36,36,29,34],[36,38,29,36,"regular"],[36,45,29,43],[36,49,29,47,"urls"],[36,53,29,51],[36,55,29,53,"small"],[36,60,29,58],[37,6,30,4],[37,10,30,8],[37,11,30,9,"url"],[37,14,30,12],[37,16,30,14],[37,23,30,21],[37,27,30,25],[38,6,31,4],[38,12,31,10,"img"],[38,15,31,13],[38,18,31,16],[38,24,31,22,"fetch"],[38,29,31,27],[38,30,31,28,"url"],[38,33,31,31],[38,34,31,32],[39,6,32,4],[39,12,32,10,"blob"],[39,16,32,14],[39,19,32,17],[39,25,32,23,"img"],[39,28,32,26],[39,29,32,27,"blob"],[39,33,32,31],[39,34,32,32],[39,35,32,33],[40,6,33,4],[40,12,33,10,"base64"],[40,18,33,16],[40,21,33,19],[40,27,33,25,"blobToBase64"],[40,39,33,37],[40,40,33,38,"blob"],[40,44,33,42],[40,45,33,43],[41,6,34,4],[41,13,34,11,"base64"],[41,19,34,17],[42,4,35,2],[42,5,35,3],[42,6,35,4],[42,12,35,10],[43,6,36,4],[43,13,36,11],[43,17,36,15],[44,4,37,2],[45,2,38,0],[46,2,40,0],[46,11,40,9,"blobToBase64"],[46,23,40,21,"blobToBase64"],[46,24,40,22,"blob"],[46,28,40,32],[46,30,40,51],[47,4,41,2],[47,11,41,9],[47,15,41,13,"Promise"],[47,22,41,20],[47,23,41,21],[47,24,41,22,"resolve"],[47,31,41,29],[47,33,41,31,"reject"],[47,39,41,37],[47,44,41,42],[48,6,42,4],[48,12,42,10,"reader"],[48,18,42,28],[48,21,42,31],[48,25,42,35,"FileReader"],[48,35,42,45],[48,36,42,46],[48,37,42,47],[49,6,43,4,"reader"],[49,12,43,10],[49,13,43,11,"onloadend"],[49,22,43,20],[49,25,43,23],[49,31,43,29],[50,8,44,6],[50,14,44,12,"base64"],[50,20,44,18],[50,23,44,22,"reader"],[50,29,44,28],[50,30,44,29,"result"],[50,36,44,35],[50,37,44,47,"split"],[50,42,44,52],[50,43,44,53],[50,46,44,56],[50,47,44,57],[50,48,44,58],[50,49,44,59],[50,50,44,60],[51,8,45,6,"resolve"],[51,15,45,13],[51,16,45,14,"base64"],[51,22,45,20],[51,23,45,21],[52,6,46,4],[52,7,46,5],[53,6,47,4,"reader"],[53,12,47,10],[53,13,47,11,"onerror"],[53,20,47,18],[53,23,47,21,"reject"],[53,29,47,27],[54,6,48,4,"reader"],[54,12,48,10],[54,13,48,11,"readAsDataURL"],[54,26,48,24],[54,27,48,25,"blob"],[54,31,48,29],[54,32,48,30],[55,4,49,2],[55,5,49,3],[55,6,49,4],[56,2,50,0],[57,2,52,7],[57,17,52,22,"getBase64ForPlace"],[57,34,52,39,"getBase64ForPlace"],[57,35,52,40,"query"],[57,40,52,53],[57,42,52,79],[58,4,53,2],[59,4,54,2],[59,8,54,6,"img"],[59,11,54,9],[59,14,54,12],[59,20,54,18,"fetchPexels"],[59,31,54,29],[59,32,54,30,"query"],[59,37,54,35],[59,38,54,36],[60,4,55,2],[60,8,55,6,"img"],[60,11,55,9],[60,13,55,11],[60,20,55,18,"img"],[60,23,55,21],[61,4,56,2,"img"],[61,7,56,5],[61,10,56,8],[61,16,56,14,"fetchUnsplash"],[61,29,56,27],[61,30,56,28,"query"],[61,35,56,33],[61,36,56,34],[62,4,57,2],[62,11,57,9,"img"],[62,14,57,12],[63,2,58,0],[64,0,58,1],[64,3]],"functionMap":{"names":["<global>","fetchPexels","fetchUnsplash","blobToBase64","Promise$argument_0","reader.onloadend","getBase64ForPlace"],"mappings":"AAA;ACE;CDiB;AEE;CFgB;AGE;qBCC;uBCE;KDG;GDG;CHC;OME"},"hasCjsExports":false},"type":"js/module"}]}